<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	  <title>SpatialCast Vod Player</title>
    <link rel="stylesheet" href="../css/output2.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.5/dat.gui.min.js" type="text/javascript"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!-- <script type="text/javascript" src="https://www.datadoghq-browser-agent.com/eu1/v5/datadog-logs.js"></script> -->
    <script src="//cdn.jsdelivr.net/npm/eruda"></script>

    <script>
      // window.DD_LOGS &&
      //   window.DD_LOGS.init({
      //     clientToken: 'pub66da0137747ef860cb47845ba8580114',
      //     site: 'datadoghq.eu',
      //     service: 'browser',
      //     forwardErrorsToLogs: true,
      //     sessionSampleRate: 100,
      //   })

      //write a screen event listener to capture the scrren size and updatte body tag to have 100% width
      window.addEventListener("resize", function() {
        var width = window.innerWidth;
        var height = window.innerHeight;
        var body = document.getElementsByTagName("body")[0];
        body.style.width = "100%";
        body.style.height = "100%";
      });
    </script>

    <script type="module" src="../js/vodPlayer.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/hls.js"></script>
    <script src="https://unpkg.com/plyr@3"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  </head>

  <body class="h-full w-full">
    <div class="loader" id="load"></div>
    <div class="info" style="width: 100vw; padding: 0px 8px;">
      <span id="fpsLabel"></span>
      <span id="resoLabel"></span>
    </div>
    
    <div id="container" class="relative w-[100%] h-[70%] justify-self-center overflow-hidden" style="display: flex; align-items: center; flex-direction: column;">
      <canvas id="bg"></canvas>
      <div id="overlay" class="bg-black flex items-center gap-4 relative w-[99%] bottom-[32px] sm:bottom-[40px] h-[30px]" style="padding: 0px 8px; display: none;">
        <button id="play-button" class="bg-[#59A7FF] rounded px-2">
          <i class="fa fa-play"></i>
        </button>
        <p id="elapsed-duration" class="bg-[#59A7FF] rounded px-2">00:00</p>
        <input type="range" id="custom-seekbar" value="0" class="w-[88%] overflow-hidden relative"/>
        <select id="quality-selector" name="quality" class="bg-[#59A7FF] rounded px-2"></select>
        <button id="mute-button" class="bg-[#59A7FF] rounded px-2">
          <i class="fa fa-volume-mute"></i>
        </button>
        <input type="range" id="volume-bar" min="0" max="100" value="0.0">
        <button id="fullscreen-button" class="bg-[#59A7FF] rounded px-2">
          <i class="fa fa-expand"></i>
        </button>
        <button id="exitFullscreen-button" style="display: none;" class="bg-[#59A7FF] rounded px-2">
          <i class="fa fa-compress"></i>
        </button>
      </div>
    </div>

    <br>
    <br>
    <br>
    <div style="display: none;">
      <video
        crossorigin="anonymous"
        id="video"
        style="visibility: hidden;"
        controls
        autoplay
        muted
        playsinline
      ></video>
    </div>
    <script>
      var volume_bar = document.getElementById("volume-bar");
      const iPad = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
      function detectiPad() {
        const isMac = /Macintosh/.test(navigator.userAgent) && 'ontouchend' in document;
        return isMac;
      }
      if (iPad | detectiPad()) {
        volume_bar.style.display = 'none';
      }
      var container = document.getElementById("container");
      if (!detectiPad()){
        if (screen.orientation.type == "portrait-primary") {
          container.style.display = 'none';
        }
      }
      const iPhone = /iPhone/.test(navigator.userAgent)
      var fullscreenButton = document.getElementById("fullscreen-button");
      if (iPhone) {
        fullscreenButton.style.display = 'none';
      }
    </script>
  </body>
</html>
